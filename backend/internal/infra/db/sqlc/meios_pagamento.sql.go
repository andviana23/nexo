// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: meios_pagamento.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const activateMeioPagamento = `-- name: ActivateMeioPagamento :exec
UPDATE meios_pagamento SET
    ativo = true,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
`

type ActivateMeioPagamentoParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

func (q *Queries) ActivateMeioPagamento(ctx context.Context, arg ActivateMeioPagamentoParams) error {
	_, err := q.db.Exec(ctx, activateMeioPagamento, arg.ID, arg.TenantID)
	return err
}

const countMeiosPagamento = `-- name: CountMeiosPagamento :one
SELECT COUNT(*) FROM meios_pagamento
WHERE tenant_id = $1
`

func (q *Queries) CountMeiosPagamento(ctx context.Context, tenantID pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countMeiosPagamento, tenantID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countMeiosPagamentoAtivos = `-- name: CountMeiosPagamentoAtivos :one
SELECT COUNT(*) FROM meios_pagamento
WHERE tenant_id = $1 AND ativo = true
`

func (q *Queries) CountMeiosPagamentoAtivos(ctx context.Context, tenantID pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countMeiosPagamentoAtivos, tenantID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createMeioPagamento = `-- name: CreateMeioPagamento :one


INSERT INTO meios_pagamento (
    id,
    tenant_id,
    nome,
    tipo,
    bandeira,
    taxa,
    taxa_fixa,
    d_mais,
    icone,
    cor,
    ordem_exibicao,
    observacoes,
    ativo,
    criado_em,
    atualizado_em
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, NOW(), NOW()
) RETURNING id, tenant_id, nome, tipo, bandeira, taxa, taxa_fixa, d_mais, icone, cor, ordem_exibicao, observacoes, ativo, criado_em, atualizado_em
`

type CreateMeioPagamentoParams struct {
	ID            pgtype.UUID    `json:"id"`
	TenantID      pgtype.UUID    `json:"tenant_id"`
	Nome          string         `json:"nome"`
	Tipo          string         `json:"tipo"`
	Bandeira      *string        `json:"bandeira"`
	Taxa          pgtype.Numeric `json:"taxa"`
	TaxaFixa      pgtype.Numeric `json:"taxa_fixa"`
	DMais         *int32         `json:"d_mais"`
	Icone         *string        `json:"icone"`
	Cor           *string        `json:"cor"`
	OrdemExibicao *int32         `json:"ordem_exibicao"`
	Observacoes   *string        `json:"observacoes"`
	Ativo         *bool          `json:"ativo"`
}

// ============================================================================
// MEIOS DE PAGAMENTO QUERIES (sqlc)
// Módulo de Cadastro de Tipos de Recebimento — NEXO v1.0
// Tabela: meios_pagamento
// ============================================================================
// ============================================================================
// CREATE
// ============================================================================
func (q *Queries) CreateMeioPagamento(ctx context.Context, arg CreateMeioPagamentoParams) (MeiosPagamento, error) {
	row := q.db.QueryRow(ctx, createMeioPagamento,
		arg.ID,
		arg.TenantID,
		arg.Nome,
		arg.Tipo,
		arg.Bandeira,
		arg.Taxa,
		arg.TaxaFixa,
		arg.DMais,
		arg.Icone,
		arg.Cor,
		arg.OrdemExibicao,
		arg.Observacoes,
		arg.Ativo,
	)
	var i MeiosPagamento
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Nome,
		&i.Tipo,
		&i.Bandeira,
		&i.Taxa,
		&i.TaxaFixa,
		&i.DMais,
		&i.Icone,
		&i.Cor,
		&i.OrdemExibicao,
		&i.Observacoes,
		&i.Ativo,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const deactivateMeioPagamento = `-- name: DeactivateMeioPagamento :exec
UPDATE meios_pagamento SET
    ativo = false,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
`

type DeactivateMeioPagamentoParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

func (q *Queries) DeactivateMeioPagamento(ctx context.Context, arg DeactivateMeioPagamentoParams) error {
	_, err := q.db.Exec(ctx, deactivateMeioPagamento, arg.ID, arg.TenantID)
	return err
}

const deleteMeioPagamento = `-- name: DeleteMeioPagamento :exec

DELETE FROM meios_pagamento
WHERE id = $1 AND tenant_id = $2
`

type DeleteMeioPagamentoParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

// ============================================================================
// DELETE
// ============================================================================
func (q *Queries) DeleteMeioPagamento(ctx context.Context, arg DeleteMeioPagamentoParams) error {
	_, err := q.db.Exec(ctx, deleteMeioPagamento, arg.ID, arg.TenantID)
	return err
}

const deleteMeiosPagamentoByTenant = `-- name: DeleteMeiosPagamentoByTenant :exec
DELETE FROM meios_pagamento
WHERE tenant_id = $1
`

func (q *Queries) DeleteMeiosPagamentoByTenant(ctx context.Context, tenantID pgtype.UUID) error {
	_, err := q.db.Exec(ctx, deleteMeiosPagamentoByTenant, tenantID)
	return err
}

const existsMeioPagamentoByNome = `-- name: ExistsMeioPagamentoByNome :one
SELECT EXISTS(
    SELECT 1 FROM meios_pagamento
    WHERE tenant_id = $1 AND LOWER(nome) = LOWER($2)
) AS exists
`

type ExistsMeioPagamentoByNomeParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Lower    string      `json:"lower"`
}

func (q *Queries) ExistsMeioPagamentoByNome(ctx context.Context, arg ExistsMeioPagamentoByNomeParams) (bool, error) {
	row := q.db.QueryRow(ctx, existsMeioPagamentoByNome, arg.TenantID, arg.Lower)
	var exists bool
	err := row.Scan(&exists)
	return exists, err
}

const getMeioPagamentoByID = `-- name: GetMeioPagamentoByID :one

SELECT 
    id,
    tenant_id,
    nome,
    tipo,
    bandeira,
    taxa,
    taxa_fixa,
    d_mais,
    icone,
    cor,
    ordem_exibicao,
    observacoes,
    ativo,
    criado_em,
    atualizado_em
FROM meios_pagamento
WHERE id = $1 AND tenant_id = $2
`

type GetMeioPagamentoByIDParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

// ============================================================================
// READ
// ============================================================================
func (q *Queries) GetMeioPagamentoByID(ctx context.Context, arg GetMeioPagamentoByIDParams) (MeiosPagamento, error) {
	row := q.db.QueryRow(ctx, getMeioPagamentoByID, arg.ID, arg.TenantID)
	var i MeiosPagamento
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Nome,
		&i.Tipo,
		&i.Bandeira,
		&i.Taxa,
		&i.TaxaFixa,
		&i.DMais,
		&i.Icone,
		&i.Cor,
		&i.OrdemExibicao,
		&i.Observacoes,
		&i.Ativo,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const listMeiosPagamento = `-- name: ListMeiosPagamento :many
SELECT 
    id,
    tenant_id,
    nome,
    tipo,
    bandeira,
    taxa,
    taxa_fixa,
    d_mais,
    icone,
    cor,
    ordem_exibicao,
    observacoes,
    ativo,
    criado_em,
    atualizado_em
FROM meios_pagamento
WHERE tenant_id = $1
ORDER BY ordem_exibicao ASC, nome ASC
`

func (q *Queries) ListMeiosPagamento(ctx context.Context, tenantID pgtype.UUID) ([]MeiosPagamento, error) {
	rows, err := q.db.Query(ctx, listMeiosPagamento, tenantID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MeiosPagamento{}
	for rows.Next() {
		var i MeiosPagamento
		if err := rows.Scan(
			&i.ID,
			&i.TenantID,
			&i.Nome,
			&i.Tipo,
			&i.Bandeira,
			&i.Taxa,
			&i.TaxaFixa,
			&i.DMais,
			&i.Icone,
			&i.Cor,
			&i.OrdemExibicao,
			&i.Observacoes,
			&i.Ativo,
			&i.CriadoEm,
			&i.AtualizadoEm,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMeiosPagamentoAtivos = `-- name: ListMeiosPagamentoAtivos :many
SELECT 
    id,
    tenant_id,
    nome,
    tipo,
    bandeira,
    taxa,
    taxa_fixa,
    d_mais,
    icone,
    cor,
    ordem_exibicao,
    observacoes,
    ativo,
    criado_em,
    atualizado_em
FROM meios_pagamento
WHERE tenant_id = $1 AND ativo = true
ORDER BY ordem_exibicao ASC, nome ASC
`

func (q *Queries) ListMeiosPagamentoAtivos(ctx context.Context, tenantID pgtype.UUID) ([]MeiosPagamento, error) {
	rows, err := q.db.Query(ctx, listMeiosPagamentoAtivos, tenantID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MeiosPagamento{}
	for rows.Next() {
		var i MeiosPagamento
		if err := rows.Scan(
			&i.ID,
			&i.TenantID,
			&i.Nome,
			&i.Tipo,
			&i.Bandeira,
			&i.Taxa,
			&i.TaxaFixa,
			&i.DMais,
			&i.Icone,
			&i.Cor,
			&i.OrdemExibicao,
			&i.Observacoes,
			&i.Ativo,
			&i.CriadoEm,
			&i.AtualizadoEm,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMeiosPagamentoPorTipo = `-- name: ListMeiosPagamentoPorTipo :many
SELECT 
    id,
    tenant_id,
    nome,
    tipo,
    bandeira,
    taxa,
    taxa_fixa,
    d_mais,
    icone,
    cor,
    ordem_exibicao,
    observacoes,
    ativo,
    criado_em,
    atualizado_em
FROM meios_pagamento
WHERE tenant_id = $1 AND tipo = $2
ORDER BY ordem_exibicao ASC, nome ASC
`

type ListMeiosPagamentoPorTipoParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Tipo     string      `json:"tipo"`
}

func (q *Queries) ListMeiosPagamentoPorTipo(ctx context.Context, arg ListMeiosPagamentoPorTipoParams) ([]MeiosPagamento, error) {
	rows, err := q.db.Query(ctx, listMeiosPagamentoPorTipo, arg.TenantID, arg.Tipo)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MeiosPagamento{}
	for rows.Next() {
		var i MeiosPagamento
		if err := rows.Scan(
			&i.ID,
			&i.TenantID,
			&i.Nome,
			&i.Tipo,
			&i.Bandeira,
			&i.Taxa,
			&i.TaxaFixa,
			&i.DMais,
			&i.Icone,
			&i.Cor,
			&i.OrdemExibicao,
			&i.Observacoes,
			&i.Ativo,
			&i.CriadoEm,
			&i.AtualizadoEm,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const toggleMeioPagamentoAtivo = `-- name: ToggleMeioPagamentoAtivo :one
UPDATE meios_pagamento SET
    ativo = NOT ativo,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
RETURNING id, tenant_id, nome, tipo, bandeira, taxa, taxa_fixa, d_mais, icone, cor, ordem_exibicao, observacoes, ativo, criado_em, atualizado_em
`

type ToggleMeioPagamentoAtivoParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

func (q *Queries) ToggleMeioPagamentoAtivo(ctx context.Context, arg ToggleMeioPagamentoAtivoParams) (MeiosPagamento, error) {
	row := q.db.QueryRow(ctx, toggleMeioPagamentoAtivo, arg.ID, arg.TenantID)
	var i MeiosPagamento
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Nome,
		&i.Tipo,
		&i.Bandeira,
		&i.Taxa,
		&i.TaxaFixa,
		&i.DMais,
		&i.Icone,
		&i.Cor,
		&i.OrdemExibicao,
		&i.Observacoes,
		&i.Ativo,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const updateMeioPagamento = `-- name: UpdateMeioPagamento :one

UPDATE meios_pagamento SET
    nome = $3,
    tipo = $4,
    bandeira = $5,
    taxa = $6,
    taxa_fixa = $7,
    d_mais = $8,
    icone = $9,
    cor = $10,
    ordem_exibicao = $11,
    observacoes = $12,
    ativo = $13,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
RETURNING id, tenant_id, nome, tipo, bandeira, taxa, taxa_fixa, d_mais, icone, cor, ordem_exibicao, observacoes, ativo, criado_em, atualizado_em
`

type UpdateMeioPagamentoParams struct {
	ID            pgtype.UUID    `json:"id"`
	TenantID      pgtype.UUID    `json:"tenant_id"`
	Nome          string         `json:"nome"`
	Tipo          string         `json:"tipo"`
	Bandeira      *string        `json:"bandeira"`
	Taxa          pgtype.Numeric `json:"taxa"`
	TaxaFixa      pgtype.Numeric `json:"taxa_fixa"`
	DMais         *int32         `json:"d_mais"`
	Icone         *string        `json:"icone"`
	Cor           *string        `json:"cor"`
	OrdemExibicao *int32         `json:"ordem_exibicao"`
	Observacoes   *string        `json:"observacoes"`
	Ativo         *bool          `json:"ativo"`
}

// ============================================================================
// UPDATE
// ============================================================================
func (q *Queries) UpdateMeioPagamento(ctx context.Context, arg UpdateMeioPagamentoParams) (MeiosPagamento, error) {
	row := q.db.QueryRow(ctx, updateMeioPagamento,
		arg.ID,
		arg.TenantID,
		arg.Nome,
		arg.Tipo,
		arg.Bandeira,
		arg.Taxa,
		arg.TaxaFixa,
		arg.DMais,
		arg.Icone,
		arg.Cor,
		arg.OrdemExibicao,
		arg.Observacoes,
		arg.Ativo,
	)
	var i MeiosPagamento
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Nome,
		&i.Tipo,
		&i.Bandeira,
		&i.Taxa,
		&i.TaxaFixa,
		&i.DMais,
		&i.Icone,
		&i.Cor,
		&i.OrdemExibicao,
		&i.Observacoes,
		&i.Ativo,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const updateOrdemExibicao = `-- name: UpdateOrdemExibicao :exec
UPDATE meios_pagamento SET
    ordem_exibicao = $3,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
`

type UpdateOrdemExibicaoParams struct {
	ID            pgtype.UUID `json:"id"`
	TenantID      pgtype.UUID `json:"tenant_id"`
	OrdemExibicao *int32      `json:"ordem_exibicao"`
}

func (q *Queries) UpdateOrdemExibicao(ctx context.Context, arg UpdateOrdemExibicaoParams) error {
	_, err := q.db.Exec(ctx, updateOrdemExibicao, arg.ID, arg.TenantID, arg.OrdemExibicao)
	return err
}

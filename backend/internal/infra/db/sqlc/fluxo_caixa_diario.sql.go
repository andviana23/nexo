// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: fluxo_caixa_diario.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const countFluxoCaixaDiarioByTenant = `-- name: CountFluxoCaixaDiarioByTenant :one
SELECT COUNT(*) FROM fluxo_caixa_diario
WHERE tenant_id = $1
`

func (q *Queries) CountFluxoCaixaDiarioByTenant(ctx context.Context, tenantID pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countFluxoCaixaDiarioByTenant, tenantID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createFluxoCaixaDiario = `-- name: CreateFluxoCaixaDiario :one
INSERT INTO fluxo_caixa_diario (
    tenant_id,
    data,
    saldo_inicial,
    saldo_final,
    entradas_confirmadas,
    entradas_previstas,
    saidas_pagas,
    saidas_previstas,
    processado_em
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9
) RETURNING id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em
`

type CreateFluxoCaixaDiarioParams struct {
	TenantID            pgtype.UUID        `json:"tenant_id"`
	Data                pgtype.Date        `json:"data"`
	SaldoInicial        pgtype.Numeric     `json:"saldo_inicial"`
	SaldoFinal          pgtype.Numeric     `json:"saldo_final"`
	EntradasConfirmadas pgtype.Numeric     `json:"entradas_confirmadas"`
	EntradasPrevistas   pgtype.Numeric     `json:"entradas_previstas"`
	SaidasPagas         pgtype.Numeric     `json:"saidas_pagas"`
	SaidasPrevistas     pgtype.Numeric     `json:"saidas_previstas"`
	ProcessadoEm        pgtype.Timestamptz `json:"processado_em"`
}

func (q *Queries) CreateFluxoCaixaDiario(ctx context.Context, arg CreateFluxoCaixaDiarioParams) (FluxoCaixaDiario, error) {
	row := q.db.QueryRow(ctx, createFluxoCaixaDiario,
		arg.TenantID,
		arg.Data,
		arg.SaldoInicial,
		arg.SaldoFinal,
		arg.EntradasConfirmadas,
		arg.EntradasPrevistas,
		arg.SaidasPagas,
		arg.SaidasPrevistas,
		arg.ProcessadoEm,
	)
	var i FluxoCaixaDiario
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Data,
		&i.SaldoInicial,
		&i.SaldoFinal,
		&i.EntradasConfirmadas,
		&i.EntradasPrevistas,
		&i.SaidasPagas,
		&i.SaidasPrevistas,
		&i.AsaasPaymentsCount,
		&i.AsaasPaymentsTotal,
		&i.ProcessadoEm,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const deleteFluxoCaixaDiario = `-- name: DeleteFluxoCaixaDiario :exec
DELETE FROM fluxo_caixa_diario
WHERE id = $1 AND tenant_id = $2
`

type DeleteFluxoCaixaDiarioParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

func (q *Queries) DeleteFluxoCaixaDiario(ctx context.Context, arg DeleteFluxoCaixaDiarioParams) error {
	_, err := q.db.Exec(ctx, deleteFluxoCaixaDiario, arg.ID, arg.TenantID)
	return err
}

const getFluxoCaixaDiarioByData = `-- name: GetFluxoCaixaDiarioByData :one
SELECT id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em FROM fluxo_caixa_diario
WHERE tenant_id = $1 AND data = $2
`

type GetFluxoCaixaDiarioByDataParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Data     pgtype.Date `json:"data"`
}

func (q *Queries) GetFluxoCaixaDiarioByData(ctx context.Context, arg GetFluxoCaixaDiarioByDataParams) (FluxoCaixaDiario, error) {
	row := q.db.QueryRow(ctx, getFluxoCaixaDiarioByData, arg.TenantID, arg.Data)
	var i FluxoCaixaDiario
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Data,
		&i.SaldoInicial,
		&i.SaldoFinal,
		&i.EntradasConfirmadas,
		&i.EntradasPrevistas,
		&i.SaidasPagas,
		&i.SaidasPrevistas,
		&i.AsaasPaymentsCount,
		&i.AsaasPaymentsTotal,
		&i.ProcessadoEm,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const getFluxoCaixaDiarioByID = `-- name: GetFluxoCaixaDiarioByID :one
SELECT id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em FROM fluxo_caixa_diario
WHERE id = $1 AND tenant_id = $2
`

type GetFluxoCaixaDiarioByIDParams struct {
	ID       pgtype.UUID `json:"id"`
	TenantID pgtype.UUID `json:"tenant_id"`
}

func (q *Queries) GetFluxoCaixaDiarioByID(ctx context.Context, arg GetFluxoCaixaDiarioByIDParams) (FluxoCaixaDiario, error) {
	row := q.db.QueryRow(ctx, getFluxoCaixaDiarioByID, arg.ID, arg.TenantID)
	var i FluxoCaixaDiario
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Data,
		&i.SaldoInicial,
		&i.SaldoFinal,
		&i.EntradasConfirmadas,
		&i.EntradasPrevistas,
		&i.SaidasPagas,
		&i.SaidasPrevistas,
		&i.AsaasPaymentsCount,
		&i.AsaasPaymentsTotal,
		&i.ProcessadoEm,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}

const getUltimoSaldo = `-- name: GetUltimoSaldo :one
SELECT saldo_final
FROM fluxo_caixa_diario
WHERE tenant_id = $1
  AND data < $2
ORDER BY data DESC
LIMIT 1
`

type GetUltimoSaldoParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Data     pgtype.Date `json:"data"`
}

func (q *Queries) GetUltimoSaldo(ctx context.Context, arg GetUltimoSaldoParams) (pgtype.Numeric, error) {
	row := q.db.QueryRow(ctx, getUltimoSaldo, arg.TenantID, arg.Data)
	var saldo_final pgtype.Numeric
	err := row.Scan(&saldo_final)
	return saldo_final, err
}

const listFluxoCaixaDiarioByPeriod = `-- name: ListFluxoCaixaDiarioByPeriod :many
SELECT id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em FROM fluxo_caixa_diario
WHERE tenant_id = $1
  AND data >= $2
  AND data <= $3
ORDER BY data DESC
`

type ListFluxoCaixaDiarioByPeriodParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Data     pgtype.Date `json:"data"`
	Data_2   pgtype.Date `json:"data_2"`
}

func (q *Queries) ListFluxoCaixaDiarioByPeriod(ctx context.Context, arg ListFluxoCaixaDiarioByPeriodParams) ([]FluxoCaixaDiario, error) {
	rows, err := q.db.Query(ctx, listFluxoCaixaDiarioByPeriod, arg.TenantID, arg.Data, arg.Data_2)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []FluxoCaixaDiario{}
	for rows.Next() {
		var i FluxoCaixaDiario
		if err := rows.Scan(
			&i.ID,
			&i.TenantID,
			&i.Data,
			&i.SaldoInicial,
			&i.SaldoFinal,
			&i.EntradasConfirmadas,
			&i.EntradasPrevistas,
			&i.SaidasPagas,
			&i.SaidasPrevistas,
			&i.AsaasPaymentsCount,
			&i.AsaasPaymentsTotal,
			&i.ProcessadoEm,
			&i.CriadoEm,
			&i.AtualizadoEm,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listFluxoCaixaDiarioByTenant = `-- name: ListFluxoCaixaDiarioByTenant :many
SELECT id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em FROM fluxo_caixa_diario
WHERE tenant_id = $1
ORDER BY data DESC
LIMIT $2 OFFSET $3
`

type ListFluxoCaixaDiarioByTenantParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Limit    int32       `json:"limit"`
	Offset   int32       `json:"offset"`
}

func (q *Queries) ListFluxoCaixaDiarioByTenant(ctx context.Context, arg ListFluxoCaixaDiarioByTenantParams) ([]FluxoCaixaDiario, error) {
	rows, err := q.db.Query(ctx, listFluxoCaixaDiarioByTenant, arg.TenantID, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []FluxoCaixaDiario{}
	for rows.Next() {
		var i FluxoCaixaDiario
		if err := rows.Scan(
			&i.ID,
			&i.TenantID,
			&i.Data,
			&i.SaldoInicial,
			&i.SaldoFinal,
			&i.EntradasConfirmadas,
			&i.EntradasPrevistas,
			&i.SaidasPagas,
			&i.SaidasPrevistas,
			&i.AsaasPaymentsCount,
			&i.AsaasPaymentsTotal,
			&i.ProcessadoEm,
			&i.CriadoEm,
			&i.AtualizadoEm,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const sumEntradasByPeriod = `-- name: SumEntradasByPeriod :one
SELECT
    COALESCE(SUM(entradas_confirmadas), 0) as total_entradas
FROM fluxo_caixa_diario
WHERE tenant_id = $1
  AND data >= $2
  AND data <= $3
`

type SumEntradasByPeriodParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Data     pgtype.Date `json:"data"`
	Data_2   pgtype.Date `json:"data_2"`
}

func (q *Queries) SumEntradasByPeriod(ctx context.Context, arg SumEntradasByPeriodParams) (interface{}, error) {
	row := q.db.QueryRow(ctx, sumEntradasByPeriod, arg.TenantID, arg.Data, arg.Data_2)
	var total_entradas interface{}
	err := row.Scan(&total_entradas)
	return total_entradas, err
}

const sumSaidasByPeriod = `-- name: SumSaidasByPeriod :one
SELECT
    COALESCE(SUM(saidas_pagas), 0) as total_saidas
FROM fluxo_caixa_diario
WHERE tenant_id = $1
  AND data >= $2
  AND data <= $3
`

type SumSaidasByPeriodParams struct {
	TenantID pgtype.UUID `json:"tenant_id"`
	Data     pgtype.Date `json:"data"`
	Data_2   pgtype.Date `json:"data_2"`
}

func (q *Queries) SumSaidasByPeriod(ctx context.Context, arg SumSaidasByPeriodParams) (interface{}, error) {
	row := q.db.QueryRow(ctx, sumSaidasByPeriod, arg.TenantID, arg.Data, arg.Data_2)
	var total_saidas interface{}
	err := row.Scan(&total_saidas)
	return total_saidas, err
}

const updateFluxoCaixaDiario = `-- name: UpdateFluxoCaixaDiario :one
UPDATE fluxo_caixa_diario
SET
    saldo_inicial = $3,
    saldo_final = $4,
    entradas_confirmadas = $5,
    entradas_previstas = $6,
    saidas_pagas = $7,
    saidas_previstas = $8,
    processado_em = $9,
    atualizado_em = NOW()
WHERE id = $1 AND tenant_id = $2
RETURNING id, tenant_id, data, saldo_inicial, saldo_final, entradas_confirmadas, entradas_previstas, saidas_pagas, saidas_previstas, asaas_payments_count, asaas_payments_total, processado_em, criado_em, atualizado_em
`

type UpdateFluxoCaixaDiarioParams struct {
	ID                  pgtype.UUID        `json:"id"`
	TenantID            pgtype.UUID        `json:"tenant_id"`
	SaldoInicial        pgtype.Numeric     `json:"saldo_inicial"`
	SaldoFinal          pgtype.Numeric     `json:"saldo_final"`
	EntradasConfirmadas pgtype.Numeric     `json:"entradas_confirmadas"`
	EntradasPrevistas   pgtype.Numeric     `json:"entradas_previstas"`
	SaidasPagas         pgtype.Numeric     `json:"saidas_pagas"`
	SaidasPrevistas     pgtype.Numeric     `json:"saidas_previstas"`
	ProcessadoEm        pgtype.Timestamptz `json:"processado_em"`
}

func (q *Queries) UpdateFluxoCaixaDiario(ctx context.Context, arg UpdateFluxoCaixaDiarioParams) (FluxoCaixaDiario, error) {
	row := q.db.QueryRow(ctx, updateFluxoCaixaDiario,
		arg.ID,
		arg.TenantID,
		arg.SaldoInicial,
		arg.SaldoFinal,
		arg.EntradasConfirmadas,
		arg.EntradasPrevistas,
		arg.SaidasPagas,
		arg.SaidasPrevistas,
		arg.ProcessadoEm,
	)
	var i FluxoCaixaDiario
	err := row.Scan(
		&i.ID,
		&i.TenantID,
		&i.Data,
		&i.SaldoInicial,
		&i.SaldoFinal,
		&i.EntradasConfirmadas,
		&i.EntradasPrevistas,
		&i.SaidasPagas,
		&i.SaidasPrevistas,
		&i.AsaasPaymentsCount,
		&i.AsaasPaymentsTotal,
		&i.ProcessadoEm,
		&i.CriadoEm,
		&i.AtualizadoEm,
	)
	return i, err
}
